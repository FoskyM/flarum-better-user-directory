(()=>{var t={n:s=>{var o=s&&s.__esModule?()=>s.default:()=>s;return t.d(o,{a:o}),o},d:(s,o)=>{for(var r in o)t.o(o,r)&&!t.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:o[r]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)};(()=>{"use strict";const s=flarum.core.compat["common/app"];var o=t.n(s);o().initializers.add("foskym/flarum-better-user-directory",(function(){console.log("[foskym/flarum-better-user-directory] Hello, forum and admin!")}));const r=flarum.core.compat["forum/app"];var e=t.n(r);const a=flarum.core.compat["common/extend"],n=flarum.core.compat["common/components/Button"];var c=t.n(n);const i=flarum.core.compat["common/components/LoadingIndicator"];var u=t.n(i);const l=flarum.core.compat["common/components/Placeholder"];var d=t.n(l);function p(t,s){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},p(t,s)}function f(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,p(t,s)}const v=flarum.core.compat["common/Component"];var y=t.n(v);const _=flarum.core.compat["forum/components/UserCard"];var h=t.n(_);const g=flarum.core.compat["common/utils/ItemList"];var C=t.n(g);const N=flarum.core.compat["common/helpers/icon"];var U=t.n(N),b={joined:["","username_az","username_za","newest","oldest","nickname_az","nickname_za","most_groups_count"],"custom-levels":["most_exp","least_exp"],"discussion-count":["most_discussions","least_discussions"],"best-answer-count":["most_best_answers","least_best_answers"],"monthly-comment-count":["most_monthly_comments","least_monthly_comments"],"monthly-discussion-count":["most_monthly_discussions","least_monthly_discussions"],lastSeen:["recently_seen","least_recently_seen","recently_checkin","most_total_checkin","most_total_continuous_checkin"],"comment-count":["most_comments","least_comments"],money:["most_money","least_money"],likesReceived:["most_likes_received","least_likes_received"],badges:["most_badges_count","least_badges_count"]},k=function(t){function s(){return t.apply(this,arguments)||this}return f(s,t),s.prototype.infoItems=function(){var s=new(C()),r=this.attrs.user,e=this.attrs.params.sort||"",a=t.prototype.infoItems.call(this);for(var n in a.add("discussion-count",m("div",{className:"userStat"},U()("fas fa-comment"),o().translator.trans("fof-user-directory.forum.page.usercard.discussion-count",{count:r.discussionCount()})),70),a.add("comment-count",m("div",{className:"userStat"},U()("fas fa-comments"),o().translator.trans("fof-user-directory.forum.page.usercard.post-count",{count:r.commentCount()})),69),b)b[n].includes(e)&&a.has(n)&&s.add(n,a.get(n));return s},s}(h()),w=function(t){function s(){return t.apply(this,arguments)||this}return f(s,t),s.prototype.view=function(){var t=this.attrs.user,s=this.attrs.position,o=this.attrs.params,r="",e=s;return 1===s?(r="second",e=2):2===s?(r="first",e=1):3===s&&(r="third"),m("div",null,m("div",{className:"PodiumUser-card"},k.component({user:t,className:"UserCard--directory UserCard--podium",controlsButtonClassName:"Button Button--icon Button--flat",position:s,params:o})),m("span",{className:"PodiumUser-position "+r},e))},s}(y());const L=flarum.core.compat["forum/utils/UserControls"];var D=t.n(L);const P=flarum.core.compat["common/helpers/avatar"];var x=t.n(P);const B=flarum.core.compat["common/helpers/username"];var S=t.n(B);const I=flarum.core.compat["common/components/Dropdown"];var O=t.n(I);const j=flarum.core.compat["common/components/Link"];var z=t.n(j);const A=flarum.core.compat["forum/components/AvatarEditor"];var R=t.n(A);const M=flarum.core.compat["common/helpers/listItems"];var E=t.n(M);const G=flarum.core.compat["common/utils/classList"];var H=t.n(G),T=function(t){function s(){return t.apply(this,arguments)||this}f(s,t);var r=s.prototype;return r.view=function(){var t=this.attrs.user,s=D().controls(t,this).toArray(),r=t.color(),e=t.badges().toArray(),a=this.attrs.position;return m("div",{className:H()("UserCard UserCard--order",this.attrs.className),style:r&&{"--usercard-bg":r}},m("div",{className:"darkenBackground"},m("div",{className:"container"},!!s.length&&m(O(),{className:"UserCard-controls App-primaryControl",menuClassName:"Dropdown-menu--right",buttonClassName:this.attrs.controlsButtonClassName,label:o().translator.trans("core.forum.user_controls.button"),accessibleToggleLabel:o().translator.trans("core.forum.user_controls.toggle_dropdown_accessible_label"),icon:"fas fa-ellipsis-v"},s),m("div",{className:"UserCard--order-position"},a),m("div",{className:"UserCard-profile"},m("h1",{className:"UserCard-identity"},this.attrs.editable?m("[",null,m(R(),{user:t,className:"UserCard-avatar"})," ",S()(t)):m(z(),{href:o().route.user(t)},m("div",{className:"UserCard-avatar"},x()(t,{loading:"eager"})),S()(t))),!!e.length&&m("ul",{className:"UserCard-badges badges"},E()(e)),m("ul",{className:"UserCard-info"},E()(this.infoItems().toArray()))))))},r.infoItems=function(){var s=new(C()),r=this.attrs.user,e=this.attrs.params.sort||"",a=t.prototype.infoItems.call(this);for(var n in a.add("discussion-count",m("div",{className:"userStat"},U()("fas fa-comment"),o().translator.trans("fof-user-directory.forum.page.usercard.discussion-count",{count:r.discussionCount()})),70),a.add("comment-count",m("div",{className:"userStat"},U()("fas fa-comments"),o().translator.trans("fof-user-directory.forum.page.usercard.post-count",{count:r.commentCount()})),69),b)b[n].includes(e)&&a.has(n)&&s.add(n,a.get(n));return a},s}(h());e().initializers.add("foskym/flarum-better-user-directory",(function(){if("fof-user-directory"in flarum.extensions){var t,s,o,r,n=null==(t=flarum.extensions["fof-user-directory"])?void 0:t.UserDirectoryPage;(0,a.extend)(n.prototype,"viewItems",(function(t){t.remove("search"),t.remove("filterGroups")}));var i=null==(s=flarum.extensions["fof-user-directory"])?void 0:s.components,l=(null==i||i.UserDirectoryUserCard,null==i||i.SmallUserCard,null==(o=flarum.extensions["fof-user-directory"])?void 0:o.UserDirectoryListItem);(0,a.override)(l.prototype,"view",(function(t){var s=this.attrs,o=s.user,r=s.useSmallCards,e=s.isPodium,a={user:o,className:"UserCard--directory"+(r?" UserCard--small":""),controlsButtonClassName:"Button Button--icon Button--flat",position:s.position,params:s.params};return e?m("div",{className:"User"},w.component(a)):m("div",{className:"User"},T.component(a))}));var p=null==(r=flarum.extensions["fof-user-directory"])?void 0:r.UserDirectoryList;(0,a.override)(p.prototype,"view",(function(t){var s,o=this.attrs.state,r=o.getParams(),a=e().forum.attribute("userDirectorySmallCards");if(o.isLoading()?s=u().component():o.moreResults&&(s=c().component({className:"Button",onclick:o.loadMore.bind(o)},e().translator.trans("fof-user-directory.forum.page.load_more_button"))),o.empty()){var n=e().translator.trans("fof-user-directory.forum.page.empty_text");return m("div",{className:"DiscussionList"},d().component({text:n}))}var i=o.users.slice(0,3),p=o.users.slice(3);if(i.length>=2){var f=[i[1],i[0]];i[0]=f[0],i[1]=f[1]}return m("div",{className:"UserDirectoryList"+(o.isSearchResults()?" UserDirectoryList--searchResults":"")+(a?" UserDirectoryList--small-cards":"")},m("ul",{className:"UserDirectoryList-Podium-users"},i.map((function(t,s){return m("li",{key:t.id(),"data-id":t.id()},l.component({user:t,params:r,useSmallCards:a,isPodium:!0,position:s+1}))}))),m("ul",{className:"UserDirectoryList-users"},p.map((function(t,s){return m("li",{key:t.id(),"data-id":t.id()},l.component({user:t,params:r,useSmallCards:a,isPodium:!1,position:s+4}))}))),m("div",{className:"UserDirectoryList-loadMore"},s))}))}}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map