(()=>{var t={n:r=>{var o=r&&r.__esModule?()=>r.default:()=>r;return t.d(o,{a:o}),o},d:(r,o)=>{for(var s in o)t.o(o,s)&&!t.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:o[s]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)};(()=>{"use strict";const r=flarum.core.compat["common/app"];var o=t.n(r);o().initializers.add("foskym/flarum-better-user-directory",(function(){console.log("[foskym/flarum-better-user-directory] Hello, forum and admin!")}));const s=flarum.core.compat["forum/app"];var e=t.n(s);const a=flarum.core.compat["common/extend"],n=flarum.core.compat["common/components/Button"];var c=t.n(n);const i=flarum.core.compat["common/components/LoadingIndicator"];var u=t.n(i);const l=flarum.core.compat["common/components/Placeholder"];var d=t.n(l);function p(t,r){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},p(t,r)}function f(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,p(t,r)}const y=flarum.core.compat["common/Component"];var v=t.n(y);const _=flarum.core.compat["forum/components/UserCard"];var h=t.n(_);const b=flarum.core.compat["common/utils/ItemList"];var g=t.n(b);const N=flarum.core.compat["common/helpers/icon"];var C=t.n(N),U={joined:["","username_az","username_za","newest","oldest","nickname_az","nickname_za","most_groups_count"],"custom-levels":["most_exp","least_exp"],"discussion-count":["most_discussions","least_discussions"],"best-answer-count":["most_best_answers","least_best_answers"],"monthly-comment-count":["most_monthly_comments","least_monthly_comments"],"monthly-discussion-count":["most_monthly_discussions","least_monthly_discussions"],lastSeen:["recently_seen","least_recently_seen","recently_checkin","most_total_checkin","most_total_continuous_checkin"],"comment-count":["most_comments","least_comments"],money:["most_money","least_money"],likesReceived:["most_likes_received","least_likes_received"],badges:["most_badges_count","least_badges_count"]},k=function(t){function r(){return t.apply(this,arguments)||this}return f(r,t),r.prototype.infoItems=function(){var r=new(g()),s=this.attrs.user,e=this.attrs.params.sort||"",a=t.prototype.infoItems.call(this);for(var n in a.add("discussion-count",m("div",{className:"userStat"},C()("fas fa-comment"),o().translator.trans("fof-user-directory.forum.page.usercard.discussion-count",{count:s.discussionCount()})),70),a.add("comment-count",m("div",{className:"userStat"},C()("fas fa-comments"),o().translator.trans("fof-user-directory.forum.page.usercard.post-count",{count:s.commentCount()})),69),U)U[n].includes(e)&&a.has(n)&&r.add(n,a.get(n));return r},r}(h()),w=function(t){function r(){return t.apply(this,arguments)||this}return f(r,t),r.prototype.view=function(){var t=this.attrs.user,r=this.attrs.position,o=this.attrs.params,s="",e=r;return 1===r?(s="second",e=2):2===r?(s="first",e=1):3===r&&(s="third"),m("div",null,m("div",{className:"PodiumUser-card"},k.component({user:t,className:"UserCard--directory UserCard--podium",controlsButtonClassName:"Button Button--icon Button--flat",position:r,params:o})),m("span",{className:"PodiumUser-position "+s},e))},r}(v());const L=flarum.core.compat["forum/utils/UserControls"];var D=t.n(L);const P=flarum.core.compat["common/helpers/avatar"];var x=t.n(P);const B=flarum.core.compat["common/helpers/username"];var S=t.n(B);const I=flarum.core.compat["common/components/Dropdown"];var O=t.n(I);const j=flarum.core.compat["common/components/Link"];var z=t.n(j);const A=flarum.core.compat["forum/components/AvatarEditor"];var R=t.n(A);const M=flarum.core.compat["common/helpers/listItems"];var E=t.n(M);const G=flarum.core.compat["common/utils/classList"];var H=t.n(G),T=function(t){function r(){return t.apply(this,arguments)||this}f(r,t);var s=r.prototype;return s.view=function(){var t=this.attrs.user,r=D().controls(t,this).toArray(),s=t.color(),e=t.badges().toArray(),a=this.attrs.position;return m("div",{className:H()("UserCard UserCard--order",this.attrs.className),style:s&&{"--usercard-bg":s}},m("div",{className:"darkenBackground"},m("div",{className:"container"},!!r.length&&m(O(),{className:"UserCard-controls App-primaryControl",menuClassName:"Dropdown-menu--right",buttonClassName:this.attrs.controlsButtonClassName,label:o().translator.trans("core.forum.user_controls.button"),accessibleToggleLabel:o().translator.trans("core.forum.user_controls.toggle_dropdown_accessible_label"),icon:"fas fa-ellipsis-v"},r),m("div",{className:"UserCard--order-position"},a),m("div",{className:"UserCard-profile"},m("h1",{className:"UserCard-identity"},this.attrs.editable?m("[",null,m(R(),{user:t,className:"UserCard-avatar"})," ",S()(t)):m(z(),{href:o().route.user(t)},m("div",{className:"UserCard-avatar"},x()(t,{loading:"eager"})),S()(t))),!!e.length&&m("ul",{className:"UserCard-badges badges"},E()(e)),m("ul",{className:"UserCard-info"},E()(this.infoItems().toArray()))))))},s.infoItems=function(){var r=new(g()),s=this.attrs.user,e=this.attrs.params.sort||"",a=t.prototype.infoItems.call(this);for(var n in a.add("discussion-count",m("div",{className:"userStat"},C()("fas fa-comment"),o().translator.trans("fof-user-directory.forum.page.usercard.discussion-count",{count:s.discussionCount()})),70),a.add("comment-count",m("div",{className:"userStat"},C()("fas fa-comments"),o().translator.trans("fof-user-directory.forum.page.usercard.post-count",{count:s.commentCount()})),69),U)U[n].includes(e)&&a.has(n)&&r.add(n,a.get(n));return a},r}(h());e().initializers.add("foskym/flarum-better-user-directory",(function(){if("fof-user-directory"in flarum.extensions){var t,r,o,s,n=null==(t=flarum.extensions["fof-user-directory"])?void 0:t.UserDirectoryPage;(0,a.extend)(n.prototype,"viewItems",(function(t){e().forum.attribute("foskym-better-user-directory.hide_search")&&t.remove("search"),e().forum.attribute("foskym-better-user-directory.hide_filter_groups")&&t.remove("filterGroups")}));var i=null==(r=flarum.extensions["fof-user-directory"])?void 0:r.components,l=null==i?void 0:i.UserDirectoryUserCard,p=null==i?void 0:i.SmallUserCard,f=null==(o=flarum.extensions["fof-user-directory"])?void 0:o.UserDirectoryListItem;(0,a.override)(f.prototype,"view",(function(t){var r=this.attrs,o=r.user,s=r.useSmallCards,a=r.isPodium,n={user:o,className:"UserCard--directory"+(s?" UserCard--small":""),controlsButtonClassName:"Button Button--icon Button--flat",position:r.position,params:r.params};return e().forum.attribute("foskym-better-user-directory.podium_style")?a?m("div",{className:"User"},w.component(n)):m("div",{className:"User"},T.component(n)):m("div",{className:"User"},s?p.component(n):l.component(n))}));var y=null==(s=flarum.extensions["fof-user-directory"])?void 0:s.UserDirectoryList;(0,a.override)(y.prototype,"view",(function(t){var r,o=this.attrs.state,s=o.getParams(),a=e().forum.attribute("userDirectorySmallCards");if(o.isLoading()?r=u().component():o.moreResults&&(r=c().component({className:"Button",onclick:o.loadMore.bind(o)},e().translator.trans("fof-user-directory.forum.page.load_more_button"))),o.empty()){var n=e().translator.trans("fof-user-directory.forum.page.empty_text");return m("div",{className:"DiscussionList"},d().component({text:n}))}var i=e().forum.attribute("foskym-better-user-directory.podium_style"),l=o.users.slice(0,3),p=i?o.users.slice(3):o.users;if(l.length>=2){var y=[l[1],l[0]];l[0]=y[0],l[1]=y[1]}return m("div",{className:"UserDirectoryList"+(o.isSearchResults()?" UserDirectoryList--searchResults":"")+(a?" UserDirectoryList--small-cards":"")},i&&m("ul",{className:"UserDirectoryList-Podium-users"},l.map((function(t,r){return m("li",{key:t.id(),"data-id":t.id()},f.component({user:t,params:s,useSmallCards:a,isPodium:!0,position:r+1}))}))),m("ul",{className:"UserDirectoryList-users"},p.map((function(t,r){return m("li",{key:t.id(),"data-id":t.id()},f.component({user:t,params:s,useSmallCards:a,isPodium:!1,position:r+4}))}))),m("div",{className:"UserDirectoryList-loadMore"},r))}))}}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map