(()=>{var r={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return r.d(t,{a:t}),t},d:(o,t)=>{for(var e in t)r.o(t,e)&&!r.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},o:(r,o)=>Object.prototype.hasOwnProperty.call(r,o)};(()=>{"use strict";const o=flarum.core.compat["common/app"];var t=r.n(o);t().initializers.add("foskym/flarum-better-user-directory",(function(){console.log("[foskym/flarum-better-user-directory] Hello, forum and admin!")}));const e=flarum.core.compat["forum/app"];var s=r.n(e);const a=flarum.core.compat["common/extend"],n=flarum.core.compat["common/components/Button"];var i=r.n(n);const c=flarum.core.compat["common/components/LoadingIndicator"];var l=r.n(c);const u=flarum.core.compat["common/components/Placeholder"];var d=r.n(u);function p(r,o){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},p(r,o)}function f(r,o){r.prototype=Object.create(o.prototype),r.prototype.constructor=r,p(r,o)}const v=flarum.core.compat["common/Component"];var y=r.n(v);const h=flarum.core.compat["forum/components/UserCard"];var U=r.n(h);const C=flarum.core.compat["common/utils/ItemList"];var N=r.n(C);const g=flarum.core.compat["common/utils/humanTime"];var b=r.n(g),_=function(r){function o(){return r.apply(this,arguments)||this}return f(o,r),o.prototype.infoItems=function(){var o=r.prototype.infoItems.call(this);console.log(o);var t=new(N()),e=this.attrs.user;return t.add("joined",app.translator.trans("core.forum.user.joined_date_text",{ago:b()(e.joinTime())})),t},o}(U()),L=function(r){function o(){return r.apply(this,arguments)||this}return f(o,r),o.prototype.view=function(){var r=this.attrs.user,o=this.attrs.position,t="",e=o;return 1===o?(t="second",e=2):2===o?(t="first",e=1):3===o&&(t="third"),m("div",null,m("div",{className:"PodiumUser-card"},_.component({user:r,className:"UserCard--directory UserCard--podium",controlsButtonClassName:"Button Button--icon Button--flat",position:o})),m("span",{className:"PodiumUser-position "+t},e))},o}(y());const D=flarum.core.compat["forum/utils/UserControls"];var P=r.n(D);const x=flarum.core.compat["common/helpers/avatar"];var B=r.n(x);const j=flarum.core.compat["common/helpers/username"];var w=r.n(j);const I=flarum.core.compat["common/components/Dropdown"];var k=r.n(I);const O=flarum.core.compat["common/components/Link"];var S=r.n(O);const A=flarum.core.compat["forum/components/AvatarEditor"];var T=r.n(A);const M=flarum.core.compat["common/helpers/listItems"];var R=r.n(M);const z=flarum.core.compat["common/utils/classList"];var E=r.n(z),G=function(r){function o(){return r.apply(this,arguments)||this}f(o,r);var e=o.prototype;return e.view=function(){var r=this.attrs.user,o=P().controls(r,this).toArray(),e=r.color(),s=r.badges().toArray(),a=this.attrs.position;return m("div",{className:E()("UserCard UserCard--order",this.attrs.className),style:e&&{"--usercard-bg":e}},m("div",{className:"darkenBackground"},m("div",{className:"container"},!!o.length&&m(k(),{className:"UserCard-controls App-primaryControl",menuClassName:"Dropdown-menu--right",buttonClassName:this.attrs.controlsButtonClassName,label:t().translator.trans("core.forum.user_controls.button"),accessibleToggleLabel:t().translator.trans("core.forum.user_controls.toggle_dropdown_accessible_label"),icon:"fas fa-ellipsis-v"},o),m("div",{className:"UserCard--order-position"},a),m("div",{className:"UserCard-profile"},m("h1",{className:"UserCard-identity"},this.attrs.editable?m("[",null,m(T(),{user:r,className:"UserCard-avatar"})," ",w()(r)):m(S(),{href:t().route.user(r)},m("div",{className:"UserCard-avatar"},B()(r,{loading:"eager"})),w()(r))),!!s.length&&m("ul",{className:"UserCard-badges badges"},R()(s)),m("ul",{className:"UserCard-info"},R()(this.infoItems().toArray()))))))},e.infoItems=function(){var o=r.prototype.infoItems.call(this);console.log(o);var e=new(N()),s=this.attrs.user;return e.add("joined",t().translator.trans("core.forum.user.joined_date_text",{ago:b()(s.joinTime())})),e},o}(U());s().initializers.add("foskym/flarum-better-user-directory",(function(){if("fof-user-directory"in flarum.extensions){var r,o,t,e,n=null==(r=flarum.extensions["fof-user-directory"])?void 0:r.UserDirectoryPage;(0,a.extend)(n.prototype,"viewItems",(function(r){r.remove("search"),r.remove("filterGroups")}));var c=null==(o=flarum.extensions["fof-user-directory"])?void 0:o.components,u=(null==c||c.UserDirectoryUserCard,null==c||c.SmallUserCard,null==(t=flarum.extensions["fof-user-directory"])?void 0:t.UserDirectoryListItem);(0,a.override)(u.prototype,"view",(function(r){var o=this.attrs,t=o.user,e=o.useSmallCards,s=o.isPodium,a={user:t,className:"UserCard--directory"+(e?" UserCard--small":""),controlsButtonClassName:"Button Button--icon Button--flat",position:o.position};return s?m("div",{className:"User"},L.component(a)):m("div",{className:"User"},G.component(a))}));var p=null==(e=flarum.extensions["fof-user-directory"])?void 0:e.UserDirectoryList;(0,a.override)(p.prototype,"view",(function(r){var o,t=this.attrs.state,e=t.getParams(),a=s().forum.attribute("userDirectorySmallCards");if(t.isLoading()?o=l().component():t.moreResults&&(o=i().component({className:"Button",onclick:t.loadMore.bind(t)},s().translator.trans("fof-user-directory.forum.page.load_more_button"))),t.empty()){var n=s().translator.trans("fof-user-directory.forum.page.empty_text");return m("div",{className:"DiscussionList"},d().component({text:n}))}var c=t.users.slice(0,3),p=t.users.slice(3);if(c.length>=2){var f=[c[1],c[0]];c[0]=f[0],c[1]=f[1]}return m("div",{className:"UserDirectoryList"+(t.isSearchResults()?" UserDirectoryList--searchResults":"")+(a?" UserDirectoryList--small-cards":"")},m("ul",{className:"UserDirectoryList-Podium-users"},c.map((function(r,o){return m("li",{key:r.id(),"data-id":r.id()},u.component({user:r,params:e,useSmallCards:a,isPodium:!0,position:o+1}))}))),m("ul",{className:"UserDirectoryList-users"},p.map((function(r,o){return m("li",{key:r.id(),"data-id":r.id()},u.component({user:r,params:e,useSmallCards:a,isPodium:!1,position:o+4}))}))),m("div",{className:"UserDirectoryList-loadMore"},o))}))}}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map